########################################################################################################################
# Lightweight production container for golang apps
# v1.0.0
########################################################################################################################
FROM alpine:3.7

LABEL maintainer="tom.whiston@gmail.com"

########################################################################################################################
# Prepare env for app
########################################################################################################################
RUN mkdir -p /go/bin
ONBUILD COPY --from=builder --chown=1001 /go/bin/app /usr/local/bin/
########################################################################################################################
# Run the application
# The app is arbitrarily called app due to the copy and build commands, which allows us to be generic
########################################################################################################################
USER 1001
CMD ["app"]